{
  "name": "video-player",
  "type": "registry:ui",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "ui/video-player.tsx",
      "content": "\"use client\"\n\nimport {\n    ChevronLeft,\n    ChevronRight,\n    Loader2,\n    Maximize,\n    Maximize2,\n    MessageCircle,\n    Minimize,\n    MoreVertical,\n    Pause,\n    PictureInPicture2,\n    Play,\n    Repeat,\n    RotateCcw,\n    RotateCw,\n    Settings,\n    Volume2,\n    VolumeX,\n} from \"lucide-react\"\nimport { AnimatePresence, motion } from \"motion/react\"\nimport type React from \"react\"\nimport { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\"\n\ninterface QualitySource {\n  quality: string\n  src: string\n}\n\ninterface CaptionTrack {\n  src: string\n  label: string\n  srcLang: string\n  default?: boolean\n}\n\nexport interface VideoPlayerProps {\n  src: string | QualitySource[]\n  tracks?: CaptionTrack[]\n  poster?: string\n  title?: string\n  description?: string\n  compact?: boolean\n  onTimeUpdate?: (time: number) => void\n  onNextVideo?: () => void\n  onPrevVideo?: () => void\n  currentVideoIndex?: number\n  totalVideos?: number\n}\n\nexport interface VideoPlayerRef {\n  seek: (time: number) => void\n  play: () => void\n  pause: () => void\n}\n\nconst Tooltip = ({ children, label }: { children: React.ReactNode; label: string }) => {\n  const [isHovered, setIsHovered] = useState(false)\n\n  return (\n    <div\n      className=\"relative inline-flex\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      {children}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: isHovered ? 1 : 0 }}\n        transition={{ duration: 0.2 }}\n        className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-black/90 text-white text-xs rounded whitespace-nowrap pointer-events-none z-50\"\n      >\n        {label}\n      </motion.div>\n    </div>\n  )\n}\n\nexport const VideoPlayer = forwardRef<VideoPlayerRef, VideoPlayerProps>(({\n  src,\n  tracks = [],\n  poster,\n  title,\n  description,\n  compact = false,\n  onTimeUpdate,\n  onNextVideo,\n  onPrevVideo,\n  currentVideoIndex = 0,\n  totalVideos = 1,\n}, ref) => {\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [isMuted, setIsMuted] = useState(false)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [showControls, setShowControls] = useState(true)\n  const [activeDialog, setActiveDialog] = useState<\"settings\" | \"options\" | \"captions\" | null>(null)\n  const [volume, setVolume] = useState(1)\n  const [showVolumeSlider, setShowVolumeSlider] = useState(false)\n  const [quality, setQuality] = useState(\"auto\")\n  const [availableQualities, setAvailableQualities] = useState<string[]>([])\n  const [currentSrc, setCurrentSrc] = useState(\"\")\n  const [speed, setSpeed] = useState(1)\n  const [isPictureInPicture, setIsPictureInPicture] = useState(false)\n  const [currentCaption, setCurrentCaption] = useState<string | null>(null)\n  const [isTheaterMode, setIsTheaterMode] = useState(false)\n  const [isLooping, setIsLooping] = useState(false)\n\n  const [currentTime, setCurrentTime] = useState(0)\n  const [duration, setDuration] = useState(0)\n  const [buffered, setBuffered] = useState(0)\n\n  // Hover state for timeline\n  const [hoverTime, setHoverTime] = useState<number | null>(null)\n  const [hoverPosition, setHoverPosition] = useState<number | null>(null)\n\n  const controlsTimeoutRef = useRef<NodeJS.Timeout>()\n\n  useImperativeHandle(ref, () => ({\n    seek: (time: number) => {\n      if (videoRef.current) {\n        videoRef.current.currentTime = time\n        setCurrentTime(time)\n      }\n    },\n    play: () => {\n      videoRef.current?.play()\n    },\n    pause: () => {\n      videoRef.current?.pause()\n    }\n  }))\n\n  // Initialize quality sources\n  useEffect(() => {\n    if (Array.isArray(src)) {\n      const qualities = src.map((s) => s.quality)\n      setAvailableQualities([\"auto\", ...qualities])\n      // Default to the first quality source if auto\n      setCurrentSrc(src[0]?.src || \"\")\n    } else {\n      setAvailableQualities([\"auto\"])\n      setCurrentSrc(src)\n    }\n  }, [src])\n\n  // Initialize captions\n  useEffect(() => {\n    if (tracks.length > 0) {\n      const defaultTrack = tracks.find(t => t.default)\n      if (defaultTrack) {\n        setCurrentCaption(defaultTrack.srcLang)\n      }\n    }\n  }, [tracks])\n\n  // Handle caption change\n  const handleCaptionChange = (lang: string | null) => {\n    setCurrentCaption(lang)\n    if (videoRef.current) {\n      const textTracks = videoRef.current.textTracks\n      for (let i = 0; i < textTracks.length; i++) {\n        const track = textTracks[i]\n        if (track) {\n          if (lang && track.language === lang) {\n            track.mode = \"showing\"\n          } else {\n            track.mode = \"hidden\"\n          }\n        }\n      }\n    }\n  }\n\n  // Format time display\n  const formatTime = (time: number) => {\n    if (!time || isNaN(time)) return \"0:00\"\n    const hours = Math.floor(time / 3600)\n    const minutes = Math.floor((time % 3600) / 60)\n    const seconds = Math.floor(time % 60)\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`\n    }\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`\n  }\n\n  // Handle play/pause\n  const togglePlay = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause()\n      } else {\n        videoRef.current.play()\n      }\n      setIsPlaying(!isPlaying)\n    }\n  }\n\n  // Handle volume change\n  const handleVolumeChange = (value: number[]) => {\n    const newVolume = value[0]\n    setVolume(newVolume)\n    if (videoRef.current) {\n      videoRef.current.volume = newVolume\n    }\n    if (newVolume === 0) {\n      setIsMuted(true)\n    } else if (isMuted) {\n      setIsMuted(false)\n    }\n  }\n\n  // Toggle mute\n  const toggleMute = () => {\n    if (videoRef.current) {\n      if (isMuted) {\n        videoRef.current.volume = volume || 0.5\n        setIsMuted(false)\n      } else {\n        videoRef.current.volume = 0\n        setIsMuted(true)\n      }\n    }\n  }\n\n  // Handle progress bar click\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!videoRef.current || !duration) return\n    const rect = e.currentTarget.getBoundingClientRect()\n    const percent = (e.clientX - rect.left) / rect.width\n    const newTime = percent * duration\n    videoRef.current.currentTime = newTime\n    setCurrentTime(newTime)\n  }\n\n  // Handle progress bar hover\n  const handleProgressHover = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!duration) return\n    const rect = e.currentTarget.getBoundingClientRect()\n    const percent = (e.clientX - rect.left) / rect.width\n    const time = Math.max(0, Math.min(percent * duration, duration))\n    setHoverTime(time)\n    setHoverPosition(percent * 100)\n  }\n\n  const handleProgressLeave = () => {\n    setHoverTime(null)\n    setHoverPosition(null)\n  }\n\n  // Toggle fullscreen\n  const toggleFullscreen = () => {\n    if (!containerRef.current) return\n\n    if (!isFullscreen) {\n      if (containerRef.current.requestFullscreen) {\n        containerRef.current.requestFullscreen()\n      } else if ((containerRef.current as any).webkitRequestFullscreen) {\n        ;(containerRef.current as any).webkitRequestFullscreen()\n      }\n      setIsFullscreen(true)\n    } else {\n      if (document.fullscreenElement) {\n        document.exitFullscreen()\n      }\n      setIsFullscreen(false)\n    }\n  }\n\n  const toggleTheaterMode = () => {\n    setIsTheaterMode(!isTheaterMode)\n  }\n\n  // Handle Picture-in-Picture\n  const togglePictureInPicture = async () => {\n    try {\n      if (document.pictureInPictureElement) {\n        await document.exitPictureInPicture()\n        setIsPictureInPicture(false)\n      } else if (videoRef.current && document.pictureInPictureEnabled) {\n        await videoRef.current.requestPictureInPicture()\n        setIsPictureInPicture(true)\n      }\n    } catch (error) {\n      console.error(\"PiP error:\", error)\n    }\n  }\n\n  // Handle quality change\n  const handleQualityChange = (newQuality: string) => {\n    if (!videoRef.current) return\n\n    const currentTime = videoRef.current.currentTime\n    const wasPlaying = !videoRef.current.paused\n\n    setQuality(newQuality)\n\n    if (Array.isArray(src)) {\n      let newSrc = \"\"\n      if (newQuality === \"auto\") {\n        newSrc = src[0]?.src || \"\"\n      } else {\n        const source = src.find((s) => s.quality === newQuality)\n        if (source) newSrc = source.src\n      }\n\n      if (newSrc && newSrc !== currentSrc) {\n        setCurrentSrc(newSrc)\n        // Restore playback position after source change\n        const handleCanPlay = () => {\n          if (videoRef.current) {\n            videoRef.current.currentTime = currentTime\n            if (wasPlaying) videoRef.current.play()\n            videoRef.current.removeEventListener(\"loadedmetadata\", handleCanPlay)\n          }\n        }\n        videoRef.current.addEventListener(\"loadedmetadata\", handleCanPlay)\n      }\n    }\n  }\n\n  // Handle speed change\n  const handleSpeedChange = (newSpeed: number) => {\n    setSpeed(newSpeed)\n    if (videoRef.current) {\n      videoRef.current.playbackRate = newSpeed\n    }\n  }\n\n  // Handle skip\n  const handleSkip = (seconds: number) => {\n    if (videoRef.current) {\n      videoRef.current.currentTime += seconds\n    }\n  }\n\n  const handleToggleLoop = () => {\n    if (videoRef.current) {\n      videoRef.current.loop = !videoRef.current.loop\n      setIsLooping(!isLooping)\n    }\n  }\n\n  // Handle video metadata loaded\n  const handleLoadedMetadata = () => {\n    setDuration(videoRef.current?.duration || 0)\n    setIsLoading(false)\n  }\n\n  // Handle time update\n  const handleTimeUpdate = () => {\n    setCurrentTime(videoRef.current?.currentTime || 0)\n    if (onTimeUpdate) {\n      onTimeUpdate(videoRef.current?.currentTime || 0)\n    }\n\n    // Update buffered amount\n    if (videoRef.current && videoRef.current.buffered.length > 0) {\n      const bufferedEnd = videoRef.current.buffered.end(videoRef.current.buffered.length - 1)\n      setBuffered((bufferedEnd / duration) * 100)\n    }\n  }\n\n  // Handle fullscreen change\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement)\n    }\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange)\n    return () => document.removeEventListener(\"fullscreenchange\", handleFullscreenChange)\n  }, [])\n\n  // Handle mouse movement for controls\n  useEffect(() => {\n    const container = containerRef.current\n    if (!container) return\n\n    const handleMouseMove = () => {\n      setShowControls(true)\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current)\n      }\n\n      if (isPlaying) {\n        controlsTimeoutRef.current = setTimeout(() => {\n          setShowControls(false)\n        }, 3000)\n      }\n    }\n\n    container.addEventListener(\"mousemove\", handleMouseMove)\n    return () => container.removeEventListener(\"mousemove\", handleMouseMove)\n  }, [isPlaying])\n\n  return (\n    <div\n      ref={containerRef}\n      className={`group relative w-full bg-black rounded-lg overflow-hidden ${\n        isTheaterMode ? \"fixed inset-0 rounded-none w-screen h-screen z-50\" : \"\"\n      }`}\n    >\n      <div className={`relative w-full transition-all duration-300 ${isTheaterMode ? \"h-screen\" : \"aspect-video\"}`}>\n        {/* Video Element */}\n        <video\n          ref={videoRef}\n          src={currentSrc}\n          poster={poster}\n          onLoadedMetadata={handleLoadedMetadata}\n          onTimeUpdate={handleTimeUpdate}\n          onPlay={() => setIsPlaying(true)}\n          onPause={() => setIsPlaying(false)}\n          onLoadStart={() => setIsLoading(true)}\n          onEnded={() => setIsPlaying(false)}\n          className=\"absolute inset-0 w-full h-full\"\n        >\n          {tracks.map((track, index) => (\n            <track\n              key={index}\n              kind=\"subtitles\"\n              src={track.src}\n              srcLang={track.srcLang}\n              label={track.label}\n              default={track.default}\n            />\n          ))}\n        </video>\n\n        {/* Loading Spinner */}\n        <AnimatePresence>\n          {isLoading && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm\"\n            >\n              <motion.div animate={{ rotate: 360 }} transition={{ duration: 1, repeat: Number.POSITIVE_INFINITY }}>\n                <Loader2 className=\"w-12 h-12 text-white\" />\n              </motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Controls Background Gradient */}\n        <AnimatePresence>\n          {showControls && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black via-black/50 to-transparent\"\n            />\n          )}\n        </AnimatePresence>\n\n        {/* Center Play Button */}\n        <AnimatePresence>\n          {showControls && !isPlaying && (\n            <motion.button\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              onClick={togglePlay}\n              className=\"absolute inset-0 flex items-center justify-center\"\n            >\n              <motion.div\n                whileHover={{ scale: 1.1 }}\n                whileTap={{ scale: 0.95 }}\n                className=\"p-4 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-colors\"\n              >\n                <Play className=\"w-12 h-12 text-white fill-white\" />\n              </motion.div>\n            </motion.button>\n          )}\n        </AnimatePresence>\n\n        {/* Controls Bar */}\n        <AnimatePresence>\n          {showControls && (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: 20 }}\n              className=\"absolute bottom-0 left-0 right-0 px-4 py-3 flex flex-col gap-3\"\n            >\n              {/* Progress Bar */}\n              <div\n                onClick={handleProgressClick}\n                onMouseMove={handleProgressHover}\n                onMouseLeave={handleProgressLeave}\n                className=\"group/progress relative w-full h-1.5 bg-white/20 rounded-full cursor-pointer hover:h-2 transition-all\"\n              >\n                {/* Buffered indicator */}\n                <div className=\"absolute inset-y-0 left-0 bg-white/40 rounded-full\" style={{ width: `${buffered}%` }} />\n                {/* Progress indicator */}\n                <div\n                  className=\"absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full transition-all\"\n                  style={{ width: `${(currentTime / duration) * 100}%` }}\n                />\n                {/* Scrubber */}\n                <motion.div\n                  className=\"absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg -translate-y-1/2 -translate-x-1/2 opacity-0 group-hover/progress:opacity-100 transition-opacity\"\n                  style={{ left: `${(currentTime / duration) * 100}%` }}\n                />\n                \n                {/* Hover Time Tooltip */}\n                <AnimatePresence>\n                  {hoverTime !== null && hoverPosition !== null && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 10, scale: 0.8 }}\n                      animate={{ opacity: 1, y: 0, scale: 1 }}\n                      exit={{ opacity: 0, y: 10, scale: 0.8 }}\n                      className=\"absolute bottom-full mb-4 -translate-x-1/2 bg-black/90 border border-white/10 rounded-lg px-2 py-1 text-xs text-white whitespace-nowrap z-50 pointer-events-none\"\n                      style={{ left: `${hoverPosition}%` }}\n                    >\n                      {formatTime(hoverTime)}\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n\n              {/* Time Display and Controls */}\n              <div className=\"flex items-center justify-between gap-2\">\n                {/* Left Controls */}\n                <div className=\"flex items-center gap-1\">\n                  {/* Play/Pause */}\n                  <Tooltip label={isPlaying ? \"Pause (Space)\" : \"Play (Space)\"}>\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={togglePlay}\n                      className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                      aria-label=\"Play/Pause\"\n                    >\n                      {isPlaying ? (\n                        <Pause className=\"w-5 h-5 text-white fill-white\" />\n                      ) : (\n                        <Play className=\"w-5 h-5 text-white fill-white\" />\n                      )}\n                    </motion.button>\n                  </Tooltip>\n\n                  {/* Skip Back 10s */}\n                  <Tooltip label=\"Previous 10 seconds (J)\">\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={() => handleSkip(-10)}\n                      className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                      aria-label=\"Skip back 10 seconds\"\n                    >\n                      <RotateCcw className=\"w-5 h-5 text-white\" />\n                    </motion.button>\n                  </Tooltip>\n\n                  {/* Skip Forward 10s */}\n                  <Tooltip label=\"Next 10 seconds (L)\">\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={() => handleSkip(10)}\n                      className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                      aria-label=\"Skip forward 10 seconds\"\n                    >\n                      <RotateCw className=\"w-5 h-5 text-white\" />\n                    </motion.button>\n                  </Tooltip>\n\n                  {/* Previous Video */}\n                  {currentVideoIndex > 0 && (\n                    <Tooltip label=\"Previous Video\">\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={onPrevVideo}\n                        className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                        aria-label=\"Previous video\"\n                      >\n                        <ChevronLeft className=\"w-5 h-5 text-white\" />\n                      </motion.button>\n                    </Tooltip>\n                  )}\n\n                  {/* Next Video */}\n                  {currentVideoIndex < totalVideos - 1 && (\n                    <Tooltip label=\"Next Video\">\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={onNextVideo}\n                        className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                        aria-label=\"Next video\"\n                      >\n                        <ChevronRight className=\"w-5 h-5 text-white\" />\n                      </motion.button>\n                    </Tooltip>\n                  )}\n\n                  {/* Volume Control */}\n                  <div className=\"flex items-center gap-1\">\n                    <Tooltip label={isMuted ? \"Unmute (M)\" : \"Mute (M)\"}>\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        onMouseEnter={() => setShowVolumeSlider(true)}\n                        onMouseLeave={() => setShowVolumeSlider(false)}\n                        onClick={toggleMute}\n                        className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                        aria-label=\"Mute/Unmute\"\n                      >\n                        {isMuted ? (\n                          <VolumeX className=\"w-5 h-5 text-white\" />\n                        ) : (\n                          <Volume2 className=\"w-5 h-5 text-white\" />\n                        )}\n                      </motion.button>\n                    </Tooltip>\n\n                    {/* Volume Slider */}\n                    <AnimatePresence>\n                      {showVolumeSlider && (\n                        <motion.div\n                          initial={{ opacity: 0, width: 0 }}\n                          animate={{ opacity: 1, width: 80 }}\n                          exit={{ opacity: 0, width: 0 }}\n                          className=\"overflow-hidden flex items-center pl-2\"\n                          onMouseEnter={() => setShowVolumeSlider(true)}\n                          onMouseLeave={() => setShowVolumeSlider(false)}\n                        >\n                          <input\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"1\"\n                            step=\"0.01\"\n                            value={isMuted ? 0 : volume}\n                            onChange={(e) => handleVolumeChange([Number.parseFloat(e.target.value)])}\n                            className=\"w-full h-1 rounded-full appearance-none cursor-pointer focus:outline-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-white [&::-moz-range-thumb]:border-none\"\n                            style={{\n                              background: `linear-gradient(to right, white ${isMuted ? 0 : volume * 100}%, rgba(255, 255, 255, 0.2) ${isMuted ? 0 : volume * 100}%)`\n                            }}\n                          />\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Time Display */}\n                  <span className=\"text-white text-sm ml-2 min-w-24 flex items-center\">\n                    {formatTime(currentTime)} / {formatTime(duration)}\n                  </span>\n                </div>\n\n                {/* Right Controls */}\n                <div className=\"flex items-center gap-1\">\n                  {/* Captions */}\n                  {tracks.length > 0 && (\n                    <div className=\"relative flex items-center\">\n                      <Tooltip label=\"Captions (C)\">\n                        <motion.button\n                          whileHover={{ scale: 1.1 }}\n                          whileTap={{ scale: 0.95 }}\n                          onClick={() => {\n                            if (tracks.length === 1 && tracks[0]) {\n                              handleCaptionChange(currentCaption ? null : tracks[0].srcLang)\n                            } else {\n                              setActiveDialog(activeDialog === \"captions\" ? null : \"captions\")\n                            }\n                          }}\n                          className={`p-2 rounded-lg transition-colors flex items-center justify-center ${\n                            currentCaption ? \"bg-cyan-500/30 hover:bg-cyan-500/40\" : \"hover:bg-white/20\"\n                          }`}\n                          aria-label=\"Captions\"\n                        >\n                          <MessageCircle className=\"w-5 h-5 text-white\" />\n                        </motion.button>\n                      </Tooltip>\n\n                      <AnimatePresence>\n                        {activeDialog === \"captions\" && tracks.length > 1 && (\n                          <motion.div\n                            initial={{ opacity: 0, y: 10 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: 10 }}\n                            className=\"absolute bottom-full right-0 mb-2 bg-black/95 rounded-lg p-3 min-w-40 backdrop-blur-sm border border-white/10 z-50\"\n                          >\n                            <p className=\"text-white text-xs font-semibold mb-2 uppercase opacity-70\">Captions</p>\n                            <div className=\"space-y-1\">\n                              <button\n                                onClick={() => {\n                                  handleCaptionChange(null)\n                                  setActiveDialog(null)\n                                }}\n                                className={`w-full text-left px-2 py-1 rounded text-sm transition-colors ${\n                                  !currentCaption ? \"bg-cyan-500 text-white\" : \"text-white/70 hover:bg-white/10\"\n                                }`}\n                              >\n                                Off\n                              </button>\n                              {tracks.map((track) => (\n                                <button\n                                  key={track.srcLang}\n                                  onClick={() => {\n                                    handleCaptionChange(track.srcLang)\n                                    setActiveDialog(null)\n                                  }}\n                                  className={`w-full text-left px-2 py-1 rounded text-sm transition-colors ${\n                                    currentCaption === track.srcLang ? \"bg-cyan-500 text-white\" : \"text-white/70 hover:bg-white/10\"\n                                  }`}\n                                >\n                                  {track.label}\n                                </button>\n                              ))}\n                            </div>\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                    </div>\n                  )}\n\n                  {/* Picture-in-Picture */}\n                  <Tooltip label=\"Picture in Picture (P)\">\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={togglePictureInPicture}\n                      className={`p-2 rounded-lg transition-colors flex items-center justify-center ${\n                        isPictureInPicture ? \"bg-cyan-500/30 hover:bg-cyan-500/40\" : \"hover:bg-white/20\"\n                      }`}\n                      aria-label=\"Picture in Picture\"\n                    >\n                      <PictureInPicture2 className=\"w-5 h-5 text-white\" />\n                    </motion.button>\n                  </Tooltip>\n\n                  {/* Settings */}\n                  <div className=\"relative flex items-center\">\n                    <Tooltip label=\"Settings\">\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={() => setActiveDialog(activeDialog === \"settings\" ? null : \"settings\")}\n                        className={`p-2 rounded-lg transition-colors flex items-center justify-center ${\n                          activeDialog === \"settings\" ? \"bg-cyan-500/30\" : \"hover:bg-white/20\"\n                        }`}\n                        aria-label=\"Settings\"\n                      >\n                        <Settings className=\"w-5 h-5 text-white\" />\n                      </motion.button>\n                    </Tooltip>\n\n                    <AnimatePresence>\n                      {activeDialog === \"settings\" && (\n                        <motion.div\n                          initial={{ opacity: 0, y: 10 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          exit={{ opacity: 0, y: 10 }}\n                          className=\"absolute bottom-full right-0 mb-2 bg-black/95 rounded-lg p-3 min-w-40 backdrop-blur-sm border border-white/10 z-50\"\n                        >\n                          {/* Quality Selection */}\n                          {availableQualities.length > 1 && (\n                            <div className=\"mb-3\">\n                              <p className=\"text-white text-xs font-semibold mb-2 uppercase opacity-70\">Quality</p>\n                              <div className=\"space-y-1\">\n                                {availableQualities.map((q) => (\n                                  <button\n                                    key={q}\n                                    onClick={() => handleQualityChange(q)}\n                                    className={`w-full text-left px-2 py-1 rounded text-sm transition-colors ${\n                                      quality === q ? \"bg-cyan-500 text-white\" : \"text-white/70 hover:bg-white/10\"\n                                    }`}\n                                  >\n                                    {q}\n                                  </button>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Speed Selection */}\n                          <div>\n                            <p className=\"text-white text-xs font-semibold mb-2 uppercase opacity-70\">Speed</p>\n                            <div className=\"space-y-1\">\n                              {[0.5, 0.75, 1, 1.25, 1.5, 2].map((s) => (\n                                <button\n                                  key={s}\n                                  onClick={() => handleSpeedChange(s)}\n                                  className={`w-full text-left px-2 py-1 rounded text-sm transition-colors ${\n                                    speed === s ? \"bg-cyan-500 text-white\" : \"text-white/70 hover:bg-white/10\"\n                                  }`}\n                                >\n                                  {s}x\n                                </button>\n                              ))}\n                            </div>\n                          </div>\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* More Options */}\n                  <div className=\"relative flex items-center\">\n                    <Tooltip label=\"More Options\">\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={() => setActiveDialog(activeDialog === \"options\" ? null : \"options\")}\n                        className={`p-2 rounded-lg transition-colors flex items-center justify-center ${\n                          activeDialog === \"options\" ? \"bg-cyan-500/30\" : \"hover:bg-white/20\"\n                        }`}\n                        aria-label=\"More options\"\n                      >\n                        <MoreVertical className=\"w-5 h-5 text-white\" />\n                      </motion.button>\n                    </Tooltip>\n\n                    <AnimatePresence>\n                      {activeDialog === \"options\" && (\n                        <motion.div\n                          initial={{ opacity: 0, y: 10 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          exit={{ opacity: 0, y: 10 }}\n                          className=\"absolute bottom-full right-0 mb-2 bg-black/95 rounded-lg p-2 min-w-48 backdrop-blur-sm border border-white/10 z-50\"\n                        >\n                          {/* Theater Mode */}\n                          <button\n                            onClick={() => {\n                              toggleTheaterMode()\n                              setActiveDialog(null)\n                            }}\n                            className=\"w-full text-left px-3 py-2 rounded text-sm text-white hover:bg-white/10 transition-colors flex items-center gap-2\"\n                          >\n                            <Maximize2 className=\"w-4 h-4\" />\n                            {isTheaterMode ? \"Exit Theater Mode\" : \"Theater Mode\"}\n                          </button>\n\n                          {/* Loop */}\n                          <button\n                            onClick={() => handleToggleLoop()}\n                            className={`w-full text-left px-3 py-2 rounded text-sm transition-colors flex items-center gap-2 ${\n                              isLooping ? \"bg-cyan-500/30 text-white\" : \"text-white hover:bg-white/10\"\n                            }`}\n                          >\n                            <Repeat className=\"w-4 h-4\" />\n                            Loop\n                          </button>\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Fullscreen */}\n                  <Tooltip label={isFullscreen ? \"Exit Fullscreen (F)\" : \"Fullscreen (F)\"}>\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={toggleFullscreen}\n                      className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex items-center justify-center\"\n                      aria-label=\"Fullscreen\"\n                    >\n                      {isFullscreen ? (\n                        <Minimize className=\"w-5 h-5 text-white\" />\n                      ) : (\n                        <Maximize className=\"w-5 h-5 text-white\" />\n                      )}\n                    </motion.button>\n                  </Tooltip>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  )\n})\nVideoPlayer.displayName = \"VideoPlayer\"\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}