{
  "name": "animated-toast",
  "type": "registry:ui",
  "dependencies": [
    "motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "ui/animated-toast.tsx",
      "content": "import { cn } from \"@/lib/utils\";\nimport { AlertCircle, AlertTriangle, Bell, CheckCircle, Info, X } from \"lucide-react\";\nimport { AnimatePresence, motion } from \"motion/react\";\nimport * as React from \"react\";\n\n// Toast Types\ntype ToastType = \"success\" | \"error\" | \"warning\" | \"info\" | \"default\";\ntype ToastPosition = \"top-right\" | \"top-left\" | \"top-center\" | \"bottom-right\" | \"bottom-left\" | \"bottom-center\";\n\ninterface Toast {\n  id: string;\n  title?: string;\n  message: string;\n  type?: ToastType;\n  duration?: number;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\ninterface ToastContextType {\n  toasts: Toast[];\n  addToast: (toast: Omit<Toast, \"id\">) => string;\n  removeToast: (id: string) => void;\n  clearAll: () => void;\n}\n\nconst ToastContext = React.createContext<ToastContextType | null>(null);\n\n// Toast Provider\ninterface AnimatedToastProviderProps {\n  children: React.ReactNode;\n  position?: ToastPosition;\n  maxToasts?: number;\n}\n\nexport function AnimatedToastProvider({\n  children,\n  position = \"top-right\",\n  maxToasts = 5,\n}: AnimatedToastProviderProps) {\n  const [toasts, setToasts] = React.useState<Toast[]>([]);\n\n  const addToast = React.useCallback((toast: Omit<Toast, \"id\">) => {\n    const id = Math.random().toString(36).substr(2, 9);\n    setToasts((prev) => {\n      const newToasts = [...prev, { ...toast, id }];\n      return newToasts.slice(-maxToasts);\n    });\n    return id;\n  }, [maxToasts]);\n\n  const removeToast = React.useCallback((id: string) => {\n    setToasts((prev) => prev.filter((t) => t.id !== id));\n  }, []);\n\n  const clearAll = React.useCallback(() => {\n    setToasts([]);\n  }, []);\n\n  const positionClasses: Record<ToastPosition, string> = {\n    \"top-right\": \"top-4 right-4\",\n    \"top-left\": \"top-4 left-4\",\n    \"top-center\": \"top-4 left-1/2 -translate-x-1/2\",\n    \"bottom-right\": \"bottom-4 right-4\",\n    \"bottom-left\": \"bottom-4 left-4\",\n    \"bottom-center\": \"bottom-4 left-1/2 -translate-x-1/2\",\n  };\n\n  const isTop = position.startsWith(\"top\");\n\n  return (\n    <ToastContext.Provider value={{ toasts, addToast, removeToast, clearAll }}>\n      {children}\n      <div className={cn(\"fixed z-50 flex flex-col gap-2 pointer-events-none\", positionClasses[position])}>\n        <AnimatePresence mode=\"popLayout\">\n          {(isTop ? toasts : [...toasts].reverse()).map((toast, index) => (\n            <ToastItem\n              key={toast.id}\n              toast={toast}\n              index={index}\n              onRemove={() => removeToast(toast.id)}\n              isTop={isTop}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n    </ToastContext.Provider>\n  );\n}\n\n// Toast Item\ninterface ToastItemProps {\n  toast: Toast;\n  index: number;\n  onRemove: () => void;\n  isTop: boolean;\n}\n\nfunction ToastItem({ toast, index, onRemove, isTop }: ToastItemProps) {\n  const { type = \"default\", title, message, duration = 5000, action } = toast;\n\n  React.useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(onRemove, duration);\n      return () => clearTimeout(timer);\n    }\n  }, [duration, onRemove]);\n\n  const icons: Record<ToastType, React.ReactNode> = {\n    success: <CheckCircle className=\"h-5 w-5 text-emerald-500\" />,\n    error: <AlertCircle className=\"h-5 w-5 text-red-500\" />,\n    warning: <AlertTriangle className=\"h-5 w-5 text-amber-500\" />,\n    info: <Info className=\"h-5 w-5 text-blue-500\" />,\n    default: <Bell className=\"h-5 w-5 text-muted-foreground\" />,\n  };\n\n  const borderColors: Record<ToastType, string> = {\n    success: \"border-l-emerald-500\",\n    error: \"border-l-red-500\",\n    warning: \"border-l-amber-500\",\n    info: \"border-l-blue-500\",\n    default: \"border-l-border\",\n  };\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: isTop ? -20 : 20, scale: 0.9 }}\n      animate={{ \n        opacity: 1, \n        y: 0, \n        scale: 1,\n        transition: { \n          type: \"spring\", \n          stiffness: 500, \n          damping: 30,\n          delay: index * 0.05 \n        }\n      }}\n      exit={{ \n        opacity: 0, \n        scale: 0.9, \n        x: 100,\n        transition: { duration: 0.2 }\n      }}\n      className={cn(\n        \"pointer-events-auto min-w-[320px] max-w-[420px] rounded-lg border border-l-4 bg-card p-4 shadow-lg\",\n        borderColors[type]\n      )}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"flex-shrink-0 mt-0.5\">{icons[type]}</div>\n        <div className=\"flex-1 min-w-0\">\n          {title && (\n            <p className=\"font-medium text-card-foreground\">{title}</p>\n          )}\n          <p className={cn(\"text-sm text-muted-foreground\", title && \"mt-1\")}>\n            {message}\n          </p>\n          {action && (\n            <button\n              onClick={action.onClick}\n              className=\"mt-2 text-sm font-medium text-primary hover:underline\"\n            >\n              {action.label}\n            </button>\n          )}\n        </div>\n        <button\n          onClick={onRemove}\n          className=\"flex-shrink-0 rounded-md p-1 text-muted-foreground hover:bg-muted hover:text-foreground transition-colors\"\n        >\n          <X className=\"h-4 w-4\" />\n        </button>\n      </div>\n      \n      {/* Progress bar */}\n      {duration > 0 && (\n        <motion.div\n          initial={{ scaleX: 1 }}\n          animate={{ scaleX: 0 }}\n          transition={{ duration: duration / 1000, ease: \"linear\" }}\n          className={cn(\n            \"absolute bottom-0 left-0 right-0 h-1 origin-left rounded-b-lg\",\n            type === \"success\" && \"bg-emerald-500/30\",\n            type === \"error\" && \"bg-red-500/30\",\n            type === \"warning\" && \"bg-amber-500/30\",\n            type === \"info\" && \"bg-blue-500/30\",\n            type === \"default\" && \"bg-muted\"\n          )}\n        />\n      )}\n    </motion.div>\n  );\n}\n\n// Hook to use toast\nexport function useAnimatedToast() {\n  const context = React.useContext(ToastContext);\n  if (!context) {\n    throw new Error(\"useAnimatedToast must be used within AnimatedToastProvider\");\n  }\n  return context;\n}\n\n// Standalone Toast Components\n\n// Minimal Toast\ninterface MinimalToastProps {\n  open: boolean;\n  onClose: () => void;\n  message: string;\n  type?: ToastType;\n}\n\nexport function MinimalToast({ open, onClose, message, type = \"default\" }: MinimalToastProps) {\n  React.useEffect(() => {\n    if (open) {\n      const timer = setTimeout(onClose, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [open, onClose]);\n\n  const bgColors: Record<ToastType, string> = {\n    success: \"bg-emerald-500\",\n    error: \"bg-red-500\",\n    warning: \"bg-amber-500\",\n    info: \"bg-blue-500\",\n    default: \"bg-foreground\",\n  };\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, y: 50 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 50 }}\n          className={cn(\n            \"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full text-background text-sm font-medium shadow-lg dark:text-white text-black\",\n            bgColors[type]\n          )}\n        >\n          {message}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Undo Toast\ninterface UndoToastProps {\n  open: boolean;\n  onClose: () => void;\n  onUndo: () => void;\n  message: string;\n  duration?: number;\n}\n\nexport function UndoToast({ open, onClose, onUndo, message, duration = 5000 }: UndoToastProps) {\n  const [progress, setProgress] = React.useState(100);\n\n  React.useEffect(() => {\n    if (open) {\n      const interval = setInterval(() => {\n        setProgress((prev) => {\n          if (prev <= 0) {\n            onClose();\n            return 0;\n          }\n          return prev - (100 / (duration / 100));\n        });\n      }, 100);\n      return () => clearInterval(interval);\n    } else {\n      setProgress(100);\n    }\n  }, [open, duration, onClose]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, y: 50, scale: 0.9 }}\n          animate={{ opacity: 1, y: 0, scale: 1 }}\n          exit={{ opacity: 0, y: 50, scale: 0.9 }}\n          className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 bg-foreground text-background rounded-lg shadow-xl overflow-hidden\"\n        >\n          <div className=\"flex items-center gap-4 px-4 py-3\">\n            <span className=\"text-sm\">{message}</span>\n            <button\n              onClick={() => {\n                onUndo();\n                onClose();\n              }}\n              className=\"text-sm font-semibold text-primary-foreground bg-primary px-3 py-1 rounded-md hover:opacity-90 transition-opacity\"\n            >\n              Undo\n            </button>\n          </div>\n          <div \n            className=\"h-1 bg-primary transition-all duration-100\"\n            style={{ width: `${progress}%` }}\n          />\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Notification Toast (with avatar/image)\ninterface NotificationToastProps {\n  open: boolean;\n  onClose: () => void;\n  title: string;\n  message: string;\n  avatar?: string;\n  time?: string;\n}\n\nexport function NotificationToast({ open, onClose, title, message, avatar, time }: NotificationToastProps) {\n  React.useEffect(() => {\n    if (open) {\n      const timer = setTimeout(onClose, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [open, onClose]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, x: 100, scale: 0.9 }}\n          animate={{ opacity: 1, x: 0, scale: 1 }}\n          exit={{ opacity: 0, x: 100, scale: 0.9 }}\n          transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n          className=\"fixed top-4 right-4 z-50 w-80 bg-card border border-border rounded-xl shadow-2xl overflow-hidden\"\n        >\n          <div className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              {avatar ? (\n                <img src={avatar} alt=\"\" className=\"w-10 h-10 rounded-full object-cover\" />\n              ) : (\n                <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <Bell className=\"w-5 h-5 text-primary\" />\n                </div>\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center justify-between\">\n                  <p className=\"font-semibold text-card-foreground truncate\">{title}</p>\n                  {time && <span className=\"text-xs text-muted-foreground\">{time}</span>}\n                </div>\n                <p className=\"text-sm text-muted-foreground mt-0.5 line-clamp-2\">{message}</p>\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"absolute top-2 right-2 p-1 rounded-full hover:bg-muted transition-colors\"\n          >\n            <X className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Stacked Notifications\ninterface StackedToast {\n  id: string;\n  title: string;\n  message: string;\n  type?: ToastType;\n}\n\ninterface StackedNotificationsProps {\n  toasts: StackedToast[];\n  onRemove: (id: string) => void;\n  maxVisible?: number;\n}\n\nexport function StackedNotifications({ toasts, onRemove, maxVisible = 3 }: StackedNotificationsProps) {\n  const visibleToasts = toasts.slice(0, maxVisible);\n  const hiddenCount = Math.max(0, toasts.length - maxVisible);\n\n  const icons: Record<ToastType, React.ReactNode> = {\n    success: <CheckCircle className=\"h-5 w-5 text-emerald-500\" />,\n    error: <AlertCircle className=\"h-5 w-5 text-red-500\" />,\n    warning: <AlertTriangle className=\"h-5 w-5 text-amber-500\" />,\n    info: <Info className=\"h-5 w-5 text-blue-500\" />,\n    default: <Bell className=\"h-5 w-5 text-muted-foreground\" />,\n  };\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 w-80\">\n      <AnimatePresence mode=\"popLayout\">\n        {visibleToasts.map((toast, index) => (\n          <motion.div\n            key={toast.id}\n            layout\n            initial={{ opacity: 0, y: -20, scale: 0.9 }}\n            animate={{ \n              opacity: 1 - index * 0.15, \n              y: index * 8, \n              scale: 1 - index * 0.05,\n              zIndex: maxVisible - index\n            }}\n            exit={{ opacity: 0, x: 100 }}\n            transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n            style={{ position: index === 0 ? \"relative\" : \"absolute\", top: 0, left: 0, right: 0 }}\n            className=\"bg-card border border-border rounded-lg shadow-lg p-4\"\n          >\n            <div className=\"flex items-start gap-3\">\n              {icons[toast.type || \"default\"]}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"font-medium text-card-foreground\">{toast.title}</p>\n                <p className=\"text-sm text-muted-foreground mt-0.5\">{toast.message}</p>\n              </div>\n              <button\n                onClick={() => onRemove(toast.id)}\n                className=\"p-1 rounded-md hover:bg-muted transition-colors\"\n              >\n                <X className=\"w-4 h-4 text-muted-foreground\" />\n              </button>\n            </div>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n      \n      {hiddenCount > 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-2 text-center text-sm text-muted-foreground\"\n        >\n          +{hiddenCount} more notifications\n        </motion.div>\n      )}\n    </div>\n  );\n}\n\n// Promise Toast (for async operations)\ninterface PromiseToastProps<T> {\n  promise: Promise<T>;\n  loading: string;\n  success: string | ((data: T) => string);\n  error: string | ((err: Error) => string);\n}\n\nexport function usePromiseToast() {\n  const { addToast, removeToast } = useAnimatedToast();\n\n  return async function promiseToast<T>({ promise, loading, success, error }: PromiseToastProps<T>) {\n    const id = addToast({ message: loading, type: \"info\", duration: 0 });\n    \n    try {\n      const data = await promise;\n      removeToast(id);\n      addToast({ \n        message: typeof success === \"function\" ? success(data) : success, \n        type: \"success\" \n      });\n      return data;\n    } catch (err) {\n      removeToast(id);\n      addToast({ \n        message: typeof error === \"function\" ? error(err as Error) : error, \n        type: \"error\" \n      });\n      throw err;\n    }\n  };\n}\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}