{
  "name": "ai-prompt-box",
  "type": "registry:ui",
  "dependencies": [
    "motion",
    "@radix-ui/react-dialog",
    "@radix-ui/react-tooltip",
    "lucide-react"
  ],
  "files": [
    {
      "path": "ui/ai-prompt-box.tsx",
      "content": "import * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ArrowUp, BrainCog, FolderCode, Globe, Mic, Paperclip, Square, StopCircle, X } from \"lucide-react\";\nimport React from \"react\";\n\n// Utility function for className merging\nconst cn = (...classes: (string | undefined | null | false)[]) => classes.filter(Boolean).join(\" \");\n\n// Embedded CSS for minimal custom styles\nconst styles = `\n  *:focus-visible {\n    outline-offset: 0 !important;\n    --ring-offset: 0 !important;\n  }\n  textarea::-webkit-scrollbar {\n    width: 6px;\n  }\n  textarea::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  textarea::-webkit-scrollbar-thumb {\n    background-color: #444444;\n    border-radius: 3px;\n  }\n  textarea::-webkit-scrollbar-thumb:hover {\n    background-color: #555555;\n  }\n`;\n\n// Inject styles into document\nconst styleSheet = document.createElement(\"style\");\nstyleSheet.innerText = styles;\ndocument.head.appendChild(styleSheet);\n\n// Textarea Component\ninterface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {\n  className?: string;\n}\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => (\n  <textarea\n    className={cn(\n      \"flex w-full rounded-md border-none bg-transparent px-3 py-2.5 text-base text-gray-100 placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] resize-none scrollbar-thin scrollbar-thumb-[#444444] scrollbar-track-transparent hover:scrollbar-thumb-[#555555]\",\n      className\n    )}\n    ref={ref}\n    rows={1}\n    {...props}\n  />\n));\nTextarea.displayName = \"Textarea\";\n\n// Tooltip Components\nconst TooltipProvider = TooltipPrimitive.Provider;\nconst Tooltip = TooltipPrimitive.Root;\nconst TooltipTrigger = TooltipPrimitive.Trigger;\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border border-[#333333] bg-[#1F2023] px-3 py-1.5 text-sm text-white shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\n// Dialog Components\nconst Dialog = DialogPrimitive.Root;\nconst DialogPortal = DialogPrimitive.Portal;\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-[90vw] md:max-w-[800px] translate-x-[-50%] translate-y-[-50%] gap-4 border border-[#333333] bg-[#1F2023] p-0 shadow-xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-2xl\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 z-10 rounded-full bg-[#2E3033]/80 p-2 hover:bg-[#2E3033] transition-all\">\n        <X className=\"h-5 w-5 text-gray-200 hover:text-white\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight text-gray-100\", className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\n// Button Component\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"default\" | \"outline\" | \"ghost\";\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\";\n}\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = \"default\", size = \"default\", ...props }, ref) => {\n    const variantClasses = {\n      default: \"bg-white hover:bg-white/80 text-black\",\n      outline: \"border border-[#444444] bg-transparent hover:bg-[#3A3A40]\",\n      ghost: \"bg-transparent hover:bg-[#3A3A40]\",\n    };\n    const sizeClasses = {\n      default: \"h-10 px-4 py-2\",\n      sm: \"h-8 px-3 text-sm\",\n      lg: \"h-12 px-6\",\n      icon: \"h-8 w-8 rounded-full aspect-[1/1]\",\n    };\n    return (\n      <button\n        className={cn(\n          \"inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50\",\n          variantClasses[variant],\n          sizeClasses[size],\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\n// VoiceRecorder Component\ninterface VoiceRecorderProps {\n  isRecording: boolean;\n  onStartRecording: () => void;\n  onStopRecording: (duration: number) => void;\n  visualizerBars?: number;\n}\nconst VoiceRecorder: React.FC<VoiceRecorderProps> = ({\n  isRecording,\n  onStartRecording,\n  onStopRecording,\n  visualizerBars = 32,\n}) => {\n  const [time, setTime] = React.useState(0);\n  const timerRef = React.useRef<NodeJS.Timeout | null>(null);\n\n  React.useEffect(() => {\n    if (isRecording) {\n      onStartRecording();\n      timerRef.current = setInterval(() => setTime((t) => t + 1), 1000);\n    } else {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n      onStopRecording(time);\n      setTime(0);\n    }\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [isRecording, time, onStartRecording, onStopRecording]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex flex-col items-center justify-center w-full transition-all duration-300 py-3\",\n        isRecording ? \"opacity-100\" : \"opacity-0 h-0\"\n      )}\n    >\n      <div className=\"flex items-center gap-2 mb-3\">\n        <div className=\"h-2 w-2 rounded-full bg-red-500 animate-pulse\" />\n        <span className=\"font-mono text-sm text-white/80\">{formatTime(time)}</span>\n      </div>\n      <div className=\"w-full h-10 flex items-center justify-center gap-0.5 px-4\">\n        {[...Array(visualizerBars)].map((_, i) => (\n          <div\n            key={i}\n            className=\"w-0.5 rounded-full bg-white/50 animate-pulse\"\n            style={{\n              height: `${Math.max(15, Math.random() * 100)}%`,\n              animationDelay: `${i * 0.05}s`,\n              animationDuration: `${0.5 + Math.random() * 0.5}s`,\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// ImageViewDialog Component\ninterface ImageViewDialogProps {\n  imageUrl: string | null;\n  onClose: () => void;\n}\nconst ImageViewDialog: React.FC<ImageViewDialogProps> = ({ imageUrl, onClose }) => {\n  if (!imageUrl) return null;\n  return (\n    <Dialog open={!!imageUrl} onOpenChange={onClose}>\n      <DialogContent className=\"p-0 border-none bg-transparent shadow-none max-w-[90vw] md:max-w-[800px]\">\n        <DialogTitle className=\"sr-only\">Image Preview</DialogTitle>\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          transition={{ duration: 0.2, ease: \"easeOut\" }}\n          className=\"relative bg-[#1F2023] rounded-2xl overflow-hidden shadow-2xl\"\n        >\n          <img\n            src={imageUrl}\n            alt=\"Full preview\"\n            className=\"w-full max-h-[80vh] object-contain rounded-2xl\"\n          />\n        </motion.div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n// PromptInput Context and Components\ninterface PromptInputContextType {\n  isLoading: boolean;\n  value: string;\n  setValue: (value: string) => void;\n  maxHeight: number | string;\n  onSubmit?: () => void;\n  disabled?: boolean;\n}\nconst PromptInputContext = React.createContext<PromptInputContextType>({\n  isLoading: false,\n  value: \"\",\n  setValue: () => {},\n  maxHeight: 240,\n  onSubmit: undefined,\n  disabled: false,\n});\nfunction usePromptInput() {\n  const context = React.useContext(PromptInputContext);\n  if (!context) throw new Error(\"usePromptInput must be used within a PromptInput\");\n  return context;\n}\n\ninterface PromptInputProps {\n  isLoading?: boolean;\n  value?: string;\n  onValueChange?: (value: string) => void;\n  maxHeight?: number | string;\n  onSubmit?: () => void;\n  children: React.ReactNode;\n  className?: string;\n  disabled?: boolean;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDragLeave?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n}\nconst PromptInput = React.forwardRef<HTMLDivElement, PromptInputProps>(\n  (\n    {\n      className,\n      isLoading = false,\n      maxHeight = 240,\n      value,\n      onValueChange,\n      onSubmit,\n      children,\n      disabled = false,\n      onDragOver,\n      onDragLeave,\n      onDrop,\n    },\n    ref\n  ) => {\n    const [internalValue, setInternalValue] = React.useState(value || \"\");\n    const handleChange = (newValue: string) => {\n      setInternalValue(newValue);\n      onValueChange?.(newValue);\n    };\n    return (\n      <TooltipProvider>\n        <PromptInputContext.Provider\n          value={{\n            isLoading,\n            value: value ?? internalValue,\n            setValue: onValueChange ?? handleChange,\n            maxHeight,\n            onSubmit,\n            disabled,\n          }}\n        >\n          <div\n            ref={ref}\n            className={cn(\n              \"rounded-3xl border border-[#444444] bg-[#1F2023] p-2 shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300\",\n              isLoading && \"border-red-500/70\",\n              className\n            )}\n            onDragOver={onDragOver}\n            onDragLeave={onDragLeave}\n            onDrop={onDrop}\n          >\n            {children}\n          </div>\n        </PromptInputContext.Provider>\n      </TooltipProvider>\n    );\n  }\n);\nPromptInput.displayName = \"PromptInput\";\n\ninterface PromptInputTextareaProps {\n  disableAutosize?: boolean;\n  placeholder?: string;\n}\nconst PromptInputTextarea: React.FC<PromptInputTextareaProps & React.ComponentProps<typeof Textarea>> = ({\n  className,\n  onKeyDown,\n  disableAutosize = false,\n  placeholder,\n  ...props\n}) => {\n  const { value, setValue, maxHeight, onSubmit, disabled } = usePromptInput();\n  const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n\n  React.useEffect(() => {\n    if (disableAutosize || !textareaRef.current) return;\n    textareaRef.current.style.height = \"auto\";\n    textareaRef.current.style.height =\n      typeof maxHeight === \"number\"\n        ? `${Math.min(textareaRef.current.scrollHeight, maxHeight)}px`\n        : `min(${textareaRef.current.scrollHeight}px, ${maxHeight})`;\n  }, [value, maxHeight, disableAutosize]);\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      onSubmit?.();\n    }\n    onKeyDown?.(e);\n  };\n\n  return (\n    <Textarea\n      ref={textareaRef}\n      value={value}\n      onChange={(e) => setValue(e.target.value)}\n      onKeyDown={handleKeyDown}\n      className={cn(\"text-base\", className)}\n      disabled={disabled}\n      placeholder={placeholder}\n      {...props}\n    />\n  );\n};\n\ninterface PromptInputActionsProps extends React.HTMLAttributes<HTMLDivElement> {}\nconst PromptInputActions: React.FC<PromptInputActionsProps> = ({ children, className, ...props }) => (\n  <div className={cn(\"flex items-center gap-2\", className)} {...props}>\n    {children}\n  </div>\n);\n\ninterface PromptInputActionProps extends React.ComponentProps<typeof Tooltip> {\n  tooltip: React.ReactNode;\n  children: React.ReactNode;\n  side?: \"top\" | \"bottom\" | \"left\" | \"right\";\n}\nconst PromptInputAction: React.FC<PromptInputActionProps> = ({\n  tooltip,\n  children,\n  className,\n  side = \"top\",\n  ...props\n}) => {\n  const { disabled } = usePromptInput();\n  return (\n    <Tooltip {...props}>\n      <TooltipTrigger asChild disabled={disabled}>\n        {children}\n      </TooltipTrigger>\n      <TooltipContent side={side} className={className}>\n        {tooltip}\n      </TooltipContent>\n    </Tooltip>\n  );\n};\n\n// Custom Divider Component\nconst CustomDivider: React.FC = () => (\n  <div className=\"relative h-6 w-[1.5px] mx-1\">\n    <div\n      className=\"absolute inset-0 bg-gradient-to-t from-transparent via-[#9b87f5]/70 to-transparent rounded-full\"\n      style={{\n        clipPath: \"polygon(0% 0%, 100% 0%, 100% 40%, 140% 50%, 100% 60%, 100% 100%, 0% 100%, 0% 60%, -40% 50%, 0% 40%)\",\n      }}\n    />\n  </div>\n);\n\n// Main PromptInputBox Component\ninterface PromptInputBoxProps {\n  onSend?: (message: string, files?: File[]) => void;\n  isLoading?: boolean;\n  placeholder?: string;\n  className?: string;\n}\nexport const PromptInputBox = React.forwardRef((props: PromptInputBoxProps, ref: React.Ref<HTMLDivElement>) => {\n  const { onSend = () => {}, isLoading = false, placeholder = \"Type your message here...\", className } = props;\n  const [input, setInput] = React.useState(\"\");\n  const [files, setFiles] = React.useState<File[]>([]);\n  const [filePreviews, setFilePreviews] = React.useState<{ [key: string]: string }>({});\n  const [selectedImage, setSelectedImage] = React.useState<string | null>(null);\n  const [isRecording, setIsRecording] = React.useState(false);\n  const [showSearch, setShowSearch] = React.useState(false);\n  const [showThink, setShowThink] = React.useState(false);\n  const [showCanvas, setShowCanvas] = React.useState(false);\n  const uploadInputRef = React.useRef<HTMLInputElement>(null);\n  const promptBoxRef = React.useRef<HTMLDivElement>(null);\n\n  const handleToggleChange = (value: string) => {\n    if (value === \"search\") {\n      setShowSearch((prev) => !prev);\n      setShowThink(false);\n    } else if (value === \"think\") {\n      setShowThink((prev) => !prev);\n      setShowSearch(false);\n    }\n  };\n\n  const handleCanvasToggle = () => setShowCanvas((prev) => !prev);\n\n  const isImageFile = (file: File) => file.type.startsWith(\"image/\");\n\n  const processFile = (file: File) => {\n    if (!isImageFile(file)) {\n      console.log(\"Only image files are allowed\");\n      return;\n    }\n    if (file.size > 10 * 1024 * 1024) {\n      console.log(\"File too large (max 10MB)\");\n      return;\n    }\n    setFiles([file]);\n    const reader = new FileReader();\n    reader.onload = (e) => setFilePreviews({ [file.name]: e.target?.result as string });\n    reader.readAsDataURL(file);\n  };\n\n  const handleDragOver = React.useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n\n  const handleDragLeave = React.useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n\n  const handleDrop = React.useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const files = Array.from(e.dataTransfer.files);\n    const imageFiles = files.filter((file) => isImageFile(file));\n    if (imageFiles.length > 0) processFile(imageFiles[0]);\n  }, []);\n\n  const handleRemoveFile = (index: number) => {\n    const fileToRemove = files[index];\n    if (fileToRemove && filePreviews[fileToRemove.name]) setFilePreviews({});\n    setFiles([]);\n  };\n\n  const openImageModal = (imageUrl: string) => setSelectedImage(imageUrl);\n\n  const handlePaste = React.useCallback((e: ClipboardEvent) => {\n    const items = e.clipboardData?.items;\n    if (!items) return;\n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (item && item.type.indexOf(\"image\") !== -1) {\n        const file = item.getAsFile();\n        if (file) {\n          e.preventDefault();\n          processFile(file);\n          break;\n        }\n      }\n    }\n  }, []);\n\n  React.useEffect(() => {\n    document.addEventListener(\"paste\", handlePaste);\n    return () => document.removeEventListener(\"paste\", handlePaste);\n  }, [handlePaste]);\n\n  const handleSubmit = () => {\n    if (input.trim() || files.length > 0) {\n      let messagePrefix = \"\";\n      if (showSearch) messagePrefix = \"[Search: \";\n      else if (showThink) messagePrefix = \"[Think: \";\n      else if (showCanvas) messagePrefix = \"[Canvas: \";\n      const formattedInput = messagePrefix ? `${messagePrefix}${input}]` : input;\n      onSend(formattedInput, files);\n      setInput(\"\");\n      setFiles([]);\n      setFilePreviews({});\n    }\n  };\n\n  const handleStartRecording = () => console.log(\"Started recording\");\n\n  const handleStopRecording = (duration: number) => {\n    console.log(`Stopped recording after ${duration} seconds`);\n    setIsRecording(false);\n    onSend(`[Voice message - ${duration} seconds]`, []);\n  };\n\n  const hasContent = input.trim() !== \"\" || files.length > 0;\n\n  return (\n    <>\n      <PromptInput\n        value={input}\n        onValueChange={setInput}\n        isLoading={isLoading}\n        onSubmit={handleSubmit}\n        className={cn(\n          \"w-full bg-[#1F2023] border-[#444444] shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300 ease-in-out\",\n          isRecording && \"border-red-500/70\",\n          className\n        )}\n        disabled={isLoading || isRecording}\n        ref={ref || promptBoxRef}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n      >\n        {files.length > 0 && !isRecording && (\n          <div className=\"flex flex-wrap gap-2 p-0 pb-1 transition-all duration-300\">\n            {files.map((file, index) => (\n              <div key={index} className=\"relative group\">\n                {file.type.startsWith(\"image/\") && filePreviews[file.name] && (\n                  <div\n                    className=\"w-16 h-16 rounded-xl overflow-hidden cursor-pointer transition-all duration-300\"\n                    onClick={() => openImageModal(filePreviews[file.name])}\n                  >\n                    <img\n                      src={filePreviews[file.name]}\n                      alt={file.name}\n                      className=\"h-full w-full object-cover\"\n                    />\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleRemoveFile(index);\n                      }}\n                      className=\"absolute top-1 right-1 rounded-full bg-black/70 p-0.5 opacity-100 transition-opacity\"\n                    >\n                      <X className=\"h-3 w-3 text-white\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        <div\n          className={cn(\n            \"transition-all duration-300\",\n            isRecording ? \"h-0 overflow-hidden opacity-0\" : \"opacity-100\"\n          )}\n        >\n          <PromptInputTextarea\n            placeholder={\n              showSearch\n                ? \"Search the web...\"\n                : showThink\n                ? \"Think deeply...\"\n                : showCanvas\n                ? \"Create on canvas...\"\n                : placeholder\n            }\n            className=\"text-base\"\n          />\n        </div>\n\n        {isRecording && (\n          <VoiceRecorder\n            isRecording={isRecording}\n            onStartRecording={handleStartRecording}\n            onStopRecording={handleStopRecording}\n          />\n        )}\n\n        <PromptInputActions className=\"flex items-center justify-between gap-2 p-0 pt-2\">\n          <div\n            className={cn(\n              \"flex items-center gap-1 transition-opacity duration-300\",\n              isRecording ? \"opacity-0 invisible h-0\" : \"opacity-100 visible\"\n            )}\n          >\n            <PromptInputAction tooltip=\"Upload image\">\n              <button\n                onClick={() => uploadInputRef.current?.click()}\n                className=\"flex h-8 w-8 text-[#9CA3AF] cursor-pointer items-center justify-center rounded-full transition-colors hover:bg-gray-600/30 hover:text-[#D1D5DB]\"\n                disabled={isRecording}\n              >\n                <Paperclip className=\"h-5 w-5 transition-colors\" />\n                <input\n                  ref={uploadInputRef}\n                  type=\"file\"\n                  className=\"hidden\"\n                  onChange={(e) => {\n                    if (e.target.files && e.target.files.length > 0) processFile(e.target.files[0]);\n                    if (e.target) e.target.value = \"\";\n                  }}\n                  accept=\"image/*\"\n                />\n              </button>\n            </PromptInputAction>\n\n            <div className=\"flex items-center\">\n              <button\n                type=\"button\"\n                onClick={() => handleToggleChange(\"search\")}\n                className={cn(\n                  \"rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8\",\n                  showSearch\n                    ? \"bg-[#1EAEDB]/15 border-[#1EAEDB] text-[#1EAEDB]\"\n                    : \"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]\"\n                )}\n              >\n                <div className=\"w-5 h-5 flex items-center justify-center flex-shrink-0\">\n                  <motion.div\n                    animate={{ rotate: showSearch ? 360 : 0, scale: showSearch ? 1.1 : 1 }}\n                    whileHover={{ rotate: showSearch ? 360 : 15, scale: 1.1, transition: { type: \"spring\", stiffness: 300, damping: 10 } }}\n                    transition={{ type: \"spring\", stiffness: 260, damping: 25 }}\n                  >\n                    <Globe className={cn(\"w-4 h-4\", showSearch ? \"text-[#1EAEDB]\" : \"text-inherit\")} />\n                  </motion.div>\n                </div>\n                <AnimatePresence>\n                  {showSearch && (\n                    <motion.span\n                      initial={{ width: 0, opacity: 0 }}\n                      animate={{ width: \"auto\", opacity: 1 }}\n                      exit={{ width: 0, opacity: 0 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"text-xs overflow-hidden whitespace-nowrap text-[#1EAEDB] flex-shrink-0\"\n                    >\n                      Search\n                    </motion.span>\n                  )}\n                </AnimatePresence>\n              </button>\n\n              <CustomDivider />\n\n              <button\n                type=\"button\"\n                onClick={() => handleToggleChange(\"think\")}\n                className={cn(\n                  \"rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8\",\n                  showThink\n                    ? \"bg-[#8B5CF6]/15 border-[#8B5CF6] text-[#8B5CF6]\"\n                    : \"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]\"\n                )}\n              >\n                <div className=\"w-5 h-5 flex items-center justify-center flex-shrink-0\">\n                  <motion.div\n                    animate={{ rotate: showThink ? 360 : 0, scale: showThink ? 1.1 : 1 }}\n                    whileHover={{ rotate: showThink ? 360 : 15, scale: 1.1, transition: { type: \"spring\", stiffness: 300, damping: 10 } }}\n                    transition={{ type: \"spring\", stiffness: 260, damping: 25 }}\n                  >\n                    <BrainCog className={cn(\"w-4 h-4\", showThink ? \"text-[#8B5CF6]\" : \"text-inherit\")} />\n                  </motion.div>\n                </div>\n                <AnimatePresence>\n                  {showThink && (\n                    <motion.span\n                      initial={{ width: 0, opacity: 0 }}\n                      animate={{ width: \"auto\", opacity: 1 }}\n                      exit={{ width: 0, opacity: 0 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"text-xs overflow-hidden whitespace-nowrap text-[#8B5CF6] flex-shrink-0\"\n                    >\n                      Think\n                    </motion.span>\n                  )}\n                </AnimatePresence>\n              </button>\n\n              <CustomDivider />\n\n              <button\n                type=\"button\"\n                onClick={handleCanvasToggle}\n                className={cn(\n                  \"rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8\",\n                  showCanvas\n                    ? \"bg-[#F97316]/15 border-[#F97316] text-[#F97316]\"\n                    : \"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]\"\n                )}\n              >\n                <div className=\"w-5 h-5 flex items-center justify-center flex-shrink-0\">\n                  <motion.div\n                    animate={{ rotate: showCanvas ? 360 : 0, scale: showCanvas ? 1.1 : 1 }}\n                    whileHover={{ rotate: showCanvas ? 360 : 15, scale: 1.1, transition: { type: \"spring\", stiffness: 300, damping: 10 } }}\n                    transition={{ type: \"spring\", stiffness: 260, damping: 25 }}\n                  >\n                    <FolderCode className={cn(\"w-4 h-4\", showCanvas ? \"text-[#F97316]\" : \"text-inherit\")} />\n                  </motion.div>\n                </div>\n                <AnimatePresence>\n                  {showCanvas && (\n                    <motion.span\n                      initial={{ width: 0, opacity: 0 }}\n                      animate={{ width: \"auto\", opacity: 1 }}\n                      exit={{ width: 0, opacity: 0 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"text-xs overflow-hidden whitespace-nowrap text-[#F97316] flex-shrink-0\"\n                    >\n                      Canvas\n                    </motion.span>\n                  )}\n                </AnimatePresence>\n              </button>\n            </div>\n          </div>\n\n          <PromptInputAction\n            tooltip={\n              isLoading\n                ? \"Stop generation\"\n                : isRecording\n                ? \"Stop recording\"\n                : hasContent\n                ? \"Send message\"\n                : \"Voice message\"\n            }\n          >\n            <Button\n              variant=\"default\"\n              size=\"icon\"\n              className={cn(\n                \"h-8 w-8 rounded-full transition-all duration-200\",\n                isRecording\n                  ? \"bg-transparent hover:bg-gray-600/30 text-red-500 hover:text-red-400\"\n                  : hasContent\n                  ? \"bg-white hover:bg-white/80 text-[#1F2023]\"\n                  : \"bg-transparent hover:bg-gray-600/30 text-[#9CA3AF] hover:text-[#D1D5DB]\"\n              )}\n              onClick={() => {\n                if (isRecording) setIsRecording(false);\n                else if (hasContent) handleSubmit();\n                else setIsRecording(true);\n              }}\n              disabled={isLoading && !hasContent}\n            >\n              {isLoading ? (\n                <Square className=\"h-4 w-4 fill-[#1F2023] animate-pulse\" />\n              ) : isRecording ? (\n                <StopCircle className=\"h-5 w-5 text-red-500\" />\n              ) : hasContent ? (\n                <ArrowUp className=\"h-4 w-4 text-[#1F2023]\" />\n              ) : (\n                <Mic className=\"h-5 w-5 text-[#1F2023] transition-colors\" />\n              )}\n            </Button>\n          </PromptInputAction>\n        </PromptInputActions>\n      </PromptInput>\n\n      <ImageViewDialog imageUrl={selectedImage} onClose={() => setSelectedImage(null)} />\n    </>\n  );\n});\nPromptInputBox.displayName = \"PromptInputBox\";",
      "type": "registry:ui",
      "target": ""
    }
  ]
}