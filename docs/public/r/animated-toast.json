{
  "name": "animated-toast",
  "type": "registry:ui",
  "dependencies": [
    "motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "ui/animated-toast.tsx",
      "content": "import {\n  AlertCircle,\n  AlertTriangle,\n  Bell,\n  CheckCircle,\n  Info,\n  X,\n} from \"lucide-react\";\nimport { AnimatePresence, motion } from \"motion/react\";\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\n// Toast Types\ntype ToastType = \"success\" | \"error\" | \"warning\" | \"info\" | \"default\";\ntype ToastPosition =\n  | \"top-right\"\n  | \"top-left\"\n  | \"top-center\"\n  | \"bottom-right\"\n  | \"bottom-left\"\n  | \"bottom-center\";\n\ninterface Toast {\n  id: string;\n  title?: string;\n  message: string;\n  type?: ToastType;\n  duration?: number;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\ninterface ToastContextType {\n  toasts: Toast[];\n  addToast: (toast: Omit<Toast, \"id\">) => string;\n  removeToast: (id: string) => void;\n  clearAll: () => void;\n}\n\nconst ToastContext = React.createContext<ToastContextType | null>(null);\n\n// Toast Provider\ninterface AnimatedToastProviderProps {\n  children: React.ReactNode;\n  position?: ToastPosition;\n  maxToasts?: number;\n}\n\nexport function AnimatedToastProvider({\n  children,\n  position = \"top-right\",\n  maxToasts = 5,\n}: AnimatedToastProviderProps) {\n  const [toasts, setToasts] = React.useState<Toast[]>([]);\n\n  const addToast = React.useCallback(\n    (toast: Omit<Toast, \"id\">) => {\n      const id = Math.random().toString(36).substr(2, 9);\n      setToasts((prev) => {\n        const newToasts = [...prev, { ...toast, id }];\n        return newToasts.slice(-maxToasts);\n      });\n      return id;\n    },\n    [maxToasts],\n  );\n\n  const removeToast = React.useCallback((id: string) => {\n    setToasts((prev) => prev.filter((t) => t.id !== id));\n  }, []);\n\n  const clearAll = React.useCallback(() => {\n    setToasts([]);\n  }, []);\n\n  const positionClasses: Record<ToastPosition, string> = {\n    \"top-right\": \"top-4 right-4\",\n    \"top-left\": \"top-4 left-4\",\n    \"top-center\": \"top-4 left-1/2 -translate-x-1/2\",\n    \"bottom-right\": \"bottom-4 right-4\",\n    \"bottom-left\": \"bottom-4 left-4\",\n    \"bottom-center\": \"bottom-4 left-1/2 -translate-x-1/2\",\n  };\n\n  const isTop = position.startsWith(\"top\");\n\n  return (\n    <ToastContext.Provider value={{ toasts, addToast, removeToast, clearAll }}>\n      {children}\n      <div\n        className={cn(\n          \"pointer-events-none fixed z-50 flex flex-col gap-2\",\n          positionClasses[position],\n        )}\n      >\n        <AnimatePresence mode=\"popLayout\">\n          {(isTop ? toasts : [...toasts].reverse()).map((toast, index) => (\n            <ToastItem\n              key={toast.id}\n              toast={toast}\n              index={index}\n              onRemove={() => removeToast(toast.id)}\n              isTop={isTop}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n    </ToastContext.Provider>\n  );\n}\n\n// Toast Item\ninterface ToastItemProps {\n  toast: Toast;\n  index: number;\n  onRemove: () => void;\n  isTop: boolean;\n}\n\nfunction ToastItem({ toast, index, onRemove, isTop }: ToastItemProps) {\n  const { type = \"default\", title, message, duration = 5000, action } = toast;\n\n  React.useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(onRemove, duration);\n      return () => clearTimeout(timer);\n    }\n  }, [duration, onRemove]);\n\n  const icons: Record<ToastType, React.ReactNode> = {\n    success: <CheckCircle className=\"h-5 w-5 text-emerald-500\" />,\n    error: <AlertCircle className=\"h-5 w-5 text-red-500\" />,\n    warning: <AlertTriangle className=\"h-5 w-5 text-amber-500\" />,\n    info: <Info className=\"h-5 w-5 text-blue-500\" />,\n    default: <Bell className=\"h-5 w-5 text-muted-foreground\" />,\n  };\n\n  const borderColors: Record<ToastType, string> = {\n    success: \"border-l-emerald-500\",\n    error: \"border-l-red-500\",\n    warning: \"border-l-amber-500\",\n    info: \"border-l-blue-500\",\n    default: \"border-l-border\",\n  };\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: isTop ? -20 : 20, scale: 0.9 }}\n      animate={{\n        opacity: 1,\n        y: 0,\n        scale: 1,\n        transition: {\n          type: \"spring\",\n          stiffness: 500,\n          damping: 30,\n          delay: index * 0.05,\n        },\n      }}\n      exit={{\n        opacity: 0,\n        scale: 0.9,\n        x: 100,\n        transition: { duration: 0.2 },\n      }}\n      className={cn(\n        \"pointer-events-auto min-w-[320px] max-w-[420px] rounded-lg border border-l-4 bg-card p-4 shadow-lg\",\n        borderColors[type],\n      )}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"mt-0.5 flex-shrink-0\">{icons[type]}</div>\n        <div className=\"min-w-0 flex-1\">\n          {title && <p className=\"font-medium text-card-foreground\">{title}</p>}\n          <p className={cn(\"text-muted-foreground text-sm\", title && \"mt-1\")}>\n            {message}\n          </p>\n          {action && (\n            <button\n              onClick={action.onClick}\n              className=\"mt-2 font-medium text-primary text-sm hover:underline\"\n            >\n              {action.label}\n            </button>\n          )}\n        </div>\n        <button\n          onClick={onRemove}\n          className=\"flex-shrink-0 rounded-md p-1 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground\"\n        >\n          <X className=\"h-4 w-4\" />\n        </button>\n      </div>\n\n      {/* Progress bar */}\n      {duration > 0 && (\n        <motion.div\n          initial={{ scaleX: 1 }}\n          animate={{ scaleX: 0 }}\n          transition={{ duration: duration / 1000, ease: \"linear\" }}\n          className={cn(\n            \"absolute right-0 bottom-0 left-0 h-1 origin-left rounded-b-lg\",\n            type === \"success\" && \"bg-emerald-500/30\",\n            type === \"error\" && \"bg-red-500/30\",\n            type === \"warning\" && \"bg-amber-500/30\",\n            type === \"info\" && \"bg-blue-500/30\",\n            type === \"default\" && \"bg-muted\",\n          )}\n        />\n      )}\n    </motion.div>\n  );\n}\n\n// Hook to use toast\nexport function useAnimatedToast() {\n  const context = React.useContext(ToastContext);\n  if (!context) {\n    throw new Error(\n      \"useAnimatedToast must be used within AnimatedToastProvider\",\n    );\n  }\n  return context;\n}\n\n// Standalone Toast Components\n\n// Minimal Toast\ninterface MinimalToastProps {\n  open: boolean;\n  onClose: () => void;\n  message: string;\n  type?: ToastType;\n}\n\nexport function MinimalToast({\n  open,\n  onClose,\n  message,\n  type = \"default\",\n}: MinimalToastProps) {\n  React.useEffect(() => {\n    if (open) {\n      const timer = setTimeout(onClose, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [open, onClose]);\n\n  const bgColors: Record<ToastType, string> = {\n    success: \"bg-emerald-500\",\n    error: \"bg-red-500\",\n    warning: \"bg-amber-500\",\n    info: \"bg-blue-500\",\n    default: \"bg-foreground\",\n  };\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, y: 50 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 50 }}\n          className={cn(\n            \"-translate-x-1/2 fixed bottom-8 left-1/2 z-50 rounded-full px-6 py-3 font-medium text-background text-black text-sm shadow-lg dark:text-white\",\n            bgColors[type],\n          )}\n        >\n          {message}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Undo Toast\ninterface UndoToastProps {\n  open: boolean;\n  onClose: () => void;\n  onUndo: () => void;\n  message: string;\n  duration?: number;\n}\n\nexport function UndoToast({\n  open,\n  onClose,\n  onUndo,\n  message,\n  duration = 5000,\n}: UndoToastProps) {\n  const [progress, setProgress] = React.useState(100);\n\n  React.useEffect(() => {\n    if (open) {\n      const interval = setInterval(() => {\n        setProgress((prev) => {\n          if (prev <= 0) {\n            onClose();\n            return 0;\n          }\n          return prev - 100 / (duration / 100);\n        });\n      }, 100);\n      return () => clearInterval(interval);\n    } else {\n      setProgress(100);\n    }\n  }, [open, duration, onClose]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, y: 50, scale: 0.9 }}\n          animate={{ opacity: 1, y: 0, scale: 1 }}\n          exit={{ opacity: 0, y: 50, scale: 0.9 }}\n          className=\"-translate-x-1/2 fixed bottom-8 left-1/2 z-50 overflow-hidden rounded-lg bg-foreground text-background shadow-xl\"\n        >\n          <div className=\"flex items-center gap-4 px-4 py-3\">\n            <span className=\"text-sm\">{message}</span>\n            <button\n              onClick={() => {\n                onUndo();\n                onClose();\n              }}\n              className=\"rounded-md bg-primary px-3 py-1 font-semibold text-primary-foreground text-sm transition-opacity hover:opacity-90\"\n            >\n              Undo\n            </button>\n          </div>\n          <div\n            className=\"h-1 bg-primary transition-all duration-100\"\n            style={{ width: `${progress}%` }}\n          />\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Notification Toast (with avatar/image)\ninterface NotificationToastProps {\n  open: boolean;\n  onClose: () => void;\n  title: string;\n  message: string;\n  avatar?: string;\n  time?: string;\n}\n\nexport function NotificationToast({\n  open,\n  onClose,\n  title,\n  message,\n  avatar,\n  time,\n}: NotificationToastProps) {\n  React.useEffect(() => {\n    if (open) {\n      const timer = setTimeout(onClose, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [open, onClose]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0, x: 100, scale: 0.9 }}\n          animate={{ opacity: 1, x: 0, scale: 1 }}\n          exit={{ opacity: 0, x: 100, scale: 0.9 }}\n          transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n          className=\"fixed top-4 right-4 z-50 w-80 overflow-hidden rounded-xl border border-border bg-card shadow-2xl\"\n        >\n          <div className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              {avatar ? (\n                <img\n                  src={avatar}\n                  alt=\"\"\n                  className=\"h-10 w-10 rounded-full object-cover\"\n                />\n              ) : (\n                <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10\">\n                  <Bell className=\"h-5 w-5 text-primary\" />\n                </div>\n              )}\n              <div className=\"min-w-0 flex-1\">\n                <div className=\"flex items-center justify-between\">\n                  <p className=\"truncate font-semibold text-card-foreground\">\n                    {title}\n                  </p>\n                  {time && (\n                    <span className=\"text-muted-foreground text-xs\">\n                      {time}\n                    </span>\n                  )}\n                </div>\n                <p className=\"mt-0.5 line-clamp-2 text-muted-foreground text-sm\">\n                  {message}\n                </p>\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"absolute top-2 right-2 rounded-full p-1 transition-colors hover:bg-muted\"\n          >\n            <X className=\"h-4 w-4 text-muted-foreground\" />\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Stacked Notifications\nexport interface StackedToast {\n  id: string;\n  title: string;\n  message: string;\n  type?: ToastType;\n}\n\ninterface StackedNotificationsProps {\n  toasts: StackedToast[];\n  onRemove: (id: string) => void;\n  maxVisible?: number;\n}\n\nexport function StackedNotifications({\n  toasts,\n  onRemove,\n  maxVisible = 3,\n}: StackedNotificationsProps) {\n  const visibleToasts = toasts.slice(0, maxVisible);\n  const hiddenCount = Math.max(0, toasts.length - maxVisible);\n\n  const icons: Record<ToastType, React.ReactNode> = {\n    success: <CheckCircle className=\"h-5 w-5 text-emerald-500\" />,\n    error: <AlertCircle className=\"h-5 w-5 text-red-500\" />,\n    warning: <AlertTriangle className=\"h-5 w-5 text-amber-500\" />,\n    info: <Info className=\"h-5 w-5 text-blue-500\" />,\n    default: <Bell className=\"h-5 w-5 text-muted-foreground\" />,\n  };\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 w-80\">\n      <AnimatePresence mode=\"popLayout\">\n        {visibleToasts.map((toast, index) => (\n          <motion.div\n            key={toast.id}\n            layout\n            initial={{ opacity: 0, y: -20, scale: 0.9 }}\n            animate={{\n              opacity: 1 - index * 0.15,\n              y: index * 8,\n              scale: 1 - index * 0.05,\n              zIndex: maxVisible - index,\n            }}\n            exit={{ opacity: 0, x: 100 }}\n            transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n            style={{\n              position: index === 0 ? \"relative\" : \"absolute\",\n              top: 0,\n              left: 0,\n              right: 0,\n            }}\n            className=\"rounded-lg border border-border bg-card p-4 shadow-lg\"\n          >\n            <div className=\"flex items-start gap-3\">\n              {icons[toast.type || \"default\"]}\n              <div className=\"min-w-0 flex-1\">\n                <p className=\"font-medium text-card-foreground\">\n                  {toast.title}\n                </p>\n                <p className=\"mt-0.5 text-muted-foreground text-sm\">\n                  {toast.message}\n                </p>\n              </div>\n              <button\n                onClick={() => onRemove(toast.id)}\n                className=\"rounded-md p-1 transition-colors hover:bg-muted\"\n              >\n                <X className=\"h-4 w-4 text-muted-foreground\" />\n              </button>\n            </div>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n\n      {hiddenCount > 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-2 text-center text-muted-foreground text-sm\"\n        >\n          +{hiddenCount} more notifications\n        </motion.div>\n      )}\n    </div>\n  );\n}\n\n// Promise Toast (for async operations)\ninterface PromiseToastProps<T> {\n  promise: Promise<T>;\n  loading: string;\n  success: string | ((data: T) => string);\n  error: string | ((err: Error) => string);\n}\n\nexport function usePromiseToast() {\n  const { addToast, removeToast } = useAnimatedToast();\n\n  return async function promiseToast<T>({\n    promise,\n    loading,\n    success,\n    error,\n  }: PromiseToastProps<T>) {\n    const id = addToast({ message: loading, type: \"info\", duration: 0 });\n\n    try {\n      const data = await promise;\n      removeToast(id);\n      addToast({\n        message: typeof success === \"function\" ? success(data) : success,\n        type: \"success\",\n      });\n      return data;\n    } catch (err) {\n      removeToast(id);\n      addToast({\n        message: typeof error === \"function\" ? error(err as Error) : error,\n        type: \"error\",\n      });\n      throw err;\n    }\n  };\n}\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}